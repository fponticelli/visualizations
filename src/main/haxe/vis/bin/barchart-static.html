<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
	<title>ReportGrid.Visualizations</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="language" content="en" />
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<link rel="stylesheet" type="text/css" href="css/rg.css"/>
	<link rel="stylesheet" type="text/css" href="css/rg-debug.css"/>
	<link rel="stylesheet" type="text/css" href="css/rg-colors-dark2-8-qual.css"/>
	<!-- FOR DIFFENT COLOR SCHEMES TRY THE FOLLOWINGS: -->
<!--
	<link rel="stylesheet" href="css/rg-colors20.css" type="text/css"/>
	<link rel="stylesheet" href="css/rg-colors20b.css" type="text/css"/>
	<link rel="stylesheet" href="css/rg-colors20c.css" type="text/css"/>
	<link rel="stylesheet" href="css/rg-colors-mono-blue.css" type="text/css"/>
	<link rel="stylesheet" href="css/rg-colors-mono-green.css" type="text/css"/>
	<link rel="stylesheet" href="css/rg-colors-mono-red.css" type="text/css"/>
-->
	<script src="js/reportgrid-core.js?tokenId=66178806-8389-42CA-9E6B-86B4285F487A"></script>
	<script src="js/reportgrid-viz.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(){

	var start = "10 days ago",
		end = "now",
		range = ReportGrid.date.range(start, end, "day"),
		data1 = range.map(function(d,i) {
			var count = Math.round(Math.tan(i / range.length * Math.PI * 4) * 100);
			return {
				".#time:day" : d,
				event : "impression",
				impression : count,
				count : count
			};
		}),
		data2 = range.map(function(d,i) {
			var count = Math.round(Math.sin(i / range.length * Math.PI * 4) * 100);
			return {
				".#time:day" : d,
				event : "click",
				click : count,
				count : count
			};
		}),
		data3 = range.map(function(d,i) {
			var count = Math.round(Math.cos(i / range.length * Math.PI * 4) * 50);
			return {
				".#time:day" : d,
				event : "conversion",
				conversion : count,
				count : count
			};
		}),
		data4 = range.map(function(d,i) {
			var count = Math.round(Math.atan(i / range.length * Math.PI * 4) * 100);
			return {
				".#time:day" : d,
				event : "other",
				other : count,
				count : count
			};
		}),
		data5 = range.map(function(d,i) {
			var count = Math.round(Math.atan(i / range.length * Math.PI * 4) * 50);
			return {
				".#time:day" : d,
				event : "other2",
				other : count,
				count : count
			};
		})
	;
//	console.log(ReportGrid.dump(data));
	var alt = 0,
		mathData = [
			{ src : { data : data1 } }, 
			{ src : { data : data2 } },
			{ src : { data : data3 } }, 
			{ src : { data : data4 } },
			{ src : { data : data5 } }
		];
	
	ReportGrid.barChart("#chart1", {
		axes : [{
			type : ".#time:day",
			view : [start, end],
			variable : "independent",
			scalemode : "fit"
		}, {
			type : "impression"
		}, {
			type : "click"
		}, {
			type : "conversion"
		}, {
			type : "other",
			view : [0, 250]
		}],
		data : mathData,
		options : {
			segmenton : "event",
			animation : {
				animated : true,
				duration : 500,
				ease : function(f) { return f; },
				delay : 500
			},
			label : {
				datapointover : function(dp) { 
					return dp.event + ": " + ReportGrid.format(dp["count"]); 
				},
//				axis : function(name) { return ReportGrid.humanize(name); }
			},
			click : function(dp) { alert(dp[".browser"]); },
			height: 200,
			symbol : function(ds, stats) {
				return ReportGrid.symbol.get("circle", 20);
			},
			line : {
//				interpolation : "cardinal",
				effect : "gradient"
			}
		}
	});
	
	ReportGrid.barChart("#chart2", {
		axes : [{
			type : ".#time:day",
			view : [start, end],
			variable : "independent",
			scalemode : "fit"
		}, {
			type : "impression"
		}, {
			type : "click"
		}, {
			type : "conversion"
		}, {
			type : "other"
		}],
		data : mathData,
		options : {
			segmenton : "event",
			animation : {
				animated : true,
				duration : 500,
				ease : function(f) { return f; },
				delay : 500
			},
			label : {
				datapointover : function(dp) { 
					return dp.event + ": " + ReportGrid.format(dp["count"]); 
				},
//				axis : function(name) { return ReportGrid.humanize(name); }
			},
			click : function(dp) { alert(dp[".browser"]); },
			height: 200,
			symbol : function(ds, stats) {
				return ReportGrid.symbol.get("circle", 20);
			},
			line : {
//				interpolation : "cardinal",
				effect : "gradient"
			},
			stacked : false,
			effect : "none"
		}
	});

	var ageRanges = ["0-13", "14-15", "16-20", "21-35",  "91-100", "100+"];
	var genders = ["male", "female", "undisclosed", "unknown"];
	function ageGender(d,i) {
		return {
			count : ReportGrid.math.random() * 35 + 5,
			age : d,
			gender : genders[Math.floor(ReportGrid.math.random()*genders.length)]
		};
	}
	var ageGenderData = [
		{ src : { data : ageRanges.map(ageGender) }, },
		{ src : { data : ageRanges.map(ageGender) }, },
		{ src : { data : ageRanges.map(ageGender) }, },
		{ src : { data : ageRanges.map(ageGender) }, },
		{ src : { data : ageRanges.map(ageGender) }, },
	];

	ReportGrid.barChart("#chart3", {
		axes : [{
			type : "age",
			values : ageRanges,
			view : ["0-13", "100+"],
			variable : "independent"
		}, {
			type : "count",
			view : [0, 120],
			variable : "dependent"
		}],
		data : ageGenderData,
		options : {
			height : 120,
			line : {
				interpolation : "linear"
			},
			label : {
				datapointover : function(dp) { 
					return ReportGrid.format(dp["count"]); 
				},
				axis : function(name) { return ReportGrid.humanize(name); }
			},
			displayarea : true,
			displayanchorline : function(v) { return v == 'age' }
		}
	});
	
	ReportGrid.barChart("#chart4", {
		axes : [{
			type : "age",
			values : ageRanges,
			view : ["0-13", "100+"],
			variable : "independent"
		}, {
			type : "count",
			view : [0, 40],
			variable : "dependent"
		}],
		data : ageGenderData,
		options : {
			height : 120,
			line : {
				interpolation : "linear"
			},
			label : {
				datapointover : function(dp, s) { 
					return ReportGrid.format(100 * dp["count"] / s.tot, "P"); 
				},
				axis : function(name) { return ReportGrid.humanize(name); }
			},
			displayarea : true,
			stacked : false,
			displayanchorline : function(v) { return v == 'age' }
		}
	});

	var interests = ["sport", "tv", "internet", "art", "history", "diy"];
	ReportGrid.barChart("#chart5", {
		axes : [{
			type : "age",
			values : ageRanges,
			view : ["0-13", "100+"],
			variable : "independent"
		}, {
			type : "interest",
			view : ["sport", "diy"],
			values : interests,
			variable : "dependent"
		}],
		data : [{
			src : {
				data : ageRanges.map(function(d,i) {
					return {
						interest : interests[Math.floor(ReportGrid.math.random()*interests.length)],
						age : d
					};
				})
			}
		}],
		options : {
			height : 120,
			label : {
				title : "Interests by Age Groups",
				datapointover : function(dp, s) { 
					return dp["age"] + ": " + dp["interest"]; 
				},
				axis : function(name) { return ReportGrid.humanize(name); }
			},
			displayarea : true,
			line : { effect : "none" },
			symbol : ReportGrid.symbol.get("circle", 36),
			titleontop : true,
			displayanchorline : function(v) { return v == 'age' }
		}
	});
}, false)
</script>
</head>
<body>
	<div id="chart8"></div>
	<div id="chart7"></div>
	<div id="chart6"></div>
	<div id="chart5"></div>
	<div id="chart4"></div>
	<div id="chart3"></div>
	<div id="chart2"></div>
	<div id="chart1"></div>
	<div id="haxe:trace"></div>
</body>
</html>